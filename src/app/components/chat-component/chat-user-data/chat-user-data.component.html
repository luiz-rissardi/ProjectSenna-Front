
@defer (hydrate on interaction){
<section class="chat-user-data">
    @if(this.chatState.chatState()?.chatId != undefined){
    <button ButtonIcon class="back" (click)="closeChat()">
        ‚Üê
    </button>
    <button-icon alt="user photo" (click)="this.openUserDetail()"
        [image]="this.userDetailState.userDetailSignal().data.photo">
    </button-icon>

    <p> {{ this.userDetailState.userDetailSignal()?.data?.userName }} </p>

    <div class="d-flex ms-auto">
        <label class="switch m-auto">
            <input type="checkbox" (change)="switchTranslation.translationState.set(!switchTranslation.translationState())">
            <span class="slider"></span>
        </label>

        <button type="button" ButtonIcon>
            <i class="fi fi-rr-phone-flip mt-2" style="font-size: 1.5rem;"></i>
        </button>

        <div class="d-block">
            <button type="button" class="dropdownBtn" ButtonIcon (click)="toggleDropdown()">
                <i class="fi fi-rr-menu-dots-vertical mt-5 dropdownBtn" style="font-size: 1.5rem;"></i>
            </button>
            <div #dropdown class="position-absolute dropdown" style="display:none;">
                <ul class="p-0">
                    <li>
                       @if(this.chatState.chatState()?.chatType != "group"){
                        <button type="button" class="dropdown-button" (click)="this.addContact()">
                            add to contacts
                        </button>
                       }
                    </li>
                    <li>
                       @if(this.chatState.chatState()?.chatType == "group" && this.chatState.chatState().memberType == "master"){
                        <button type="button" class="dropdown-button" [routerLink]="'edit/group'">
                            edit group
                        </button>
                       }
                    </li>
                    <li>
                        <button type="button" class="dropdown-button" (click)="this.openUserDetail()">
                            profile
                        </button>
                    </li>
                    <li>
                        @if(this.chatState.chatState()?.isActive == true){
                        <button type="button" class="dropdown-button" (click)="this.blockChat()">
                            block
                        </button>
                        }@else{
                        <button type="button" class="dropdown-button" (click)="this.unlockedChat()">
                            unlock
                        </button>
                        }
                    </li>
                    <li>
                        <button type="button" class="dropdown-button" (click)="deleteMessages()">
                            delete messages
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    }
</section>

}