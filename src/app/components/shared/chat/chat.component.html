<section class="chat-user-data">
    @if(this.chatStateService.chatState() != undefined){
    <button ButtonIcon class="back" (click)="closeChat()">
        ‚Üê
    </button>
    <button-icon alt="user photo" [execute]="this.openUserDetail"
        image="https://imgs.search.brave.com/ahZhx2klnGxFg24V5yC9nemnvdbslYDQoVF3AUGrWjw/rs:fit:500:0:0/g:ce/aHR0cHM6Ly9jZG4u/bHVjaWRwaWMuY29t/LzY1YWFjMjRiNzg5/MGUucG5n">
    </button-icon>

    <p class="mt-3"> User current name </p>

    <div class="d-flex ms-auto">
        <button type="button" ButtonIcon>
            <i class="fi fi-rr-phone-flip mt-2" style="font-size: 1.5rem;"></i>
        </button>

        <div class="d-block">
            <button type="button" ButtonIcon (click)="toogleDroptDown(dropdown)">
                <i class="fi fi-rr-menu-dots-vertical mt-5" style="font-size: 1.5rem;"></i>
            </button>
            <div #dropdown class="position-absolute dropdown" style="display: none;">
                <ul class="p-0">
                    <li>
                        <button type="button" class="dropdown-button" (click)="this.openUserDetail()">
                            profile
                        </button>
                    </li>
                    <li>
                        <button type="button" class="dropdown-button">
                            block
                        </button>
                    </li>
                    <li>
                        <button type="button" class="dropdown-button">
                            clean messages
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    }
</section>

@if(this.chatStateService.chatState() != undefined){

<section class="chat" id="chat">
    @for (item of this.messages; track $index) {
    <message [isGroup]="false" [sendAt]="item.sendAt" [isYourMessage]="item.username == 'eduardo'"
        [message]="item.message" [userName]="item.username">
    </message>
    }
</section>


<div class="chat-sender">
    @if(this.chatStateService.chatState()?.isActive == true){
    <div class="d-flex ms-auto">
        <button type="button" ButtonIcon>
            <i class="fi fi-rr-comment-smile" style="font-size: 1.3rem;"></i>
        </button>
        <button type="button" ButtonIcon (click)="chosenFile()">
            <i class="fi fi-rr-menu-dots-vertical" style="font-size: 1.3rem;"></i>
            <input type="file" hidden id="file">
        </button>
    </div>

    <!-- <a href="#" id="img">dowload</a> -->
    <!-- <img [src]="this.userState.userSignal()?.photo" id="img" alt="" width="100" height="100"> -->
    <input type="text" class="chat-input" placeholder="write your message">
    <button type="button" class="chat-button-mic mx-2">
        <i class="fi fi-rr-circle-microphone"></i>
    </button>
    }@else {
    <h4 class="m-auto text-white "> This chat is blocked ! </h4>
    }
</div>
}
@else {
<div class="w-100 d-flex flex-column align-items-center py-5">
    <h2 class="text-center mt-5 mb-5 text-secondary ">
        Enjoy Just Translate <br>
        Chat with anyone!
    </h2>
    <img loading="eager" class="social-network-img" src="../../../../assets/redes.webp" alt="rede social">

    <article class="inform">
        Conversations are all private to just 2 users, except when sent to a group with more members!
    </article>
</div>
}